{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/admin_dashboard.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<div class="dashboard-container">
    <!-- LEFT SIDEBAR -->
    <div class="sidebar">
        <div class="admin-profile text-center">
            <img src="{% static 'images/admin.jpg' %}" alt="Admin" class="admin-img">
            <h4 class="mt-2">Admin Dashboard</h4>
            <p class="welcome-text">Welcome {{ user.username }}</p>
        </div>
        <hr>
        <ul class="sidebar-menu">
            <li><a href="{% url 'manage_teachers' %}"><i class="bi bi-person-badge"></i> Manage Teachers</a></li>
            <li><a href="{% url 'manage_students' %}"><i class="bi bi-people"></i> Manage Students</a></li>
            <li><a href="{% url 'pending_requests' %}"><i class="bi bi-inbox"></i> Pending Requests</a></li>
            <li><a href="{% url 'admin_view_attendance' %}"><i class="bi bi-calendar-check"></i> Attendance</a></li>
            <li><a href="{% url 'admin_manage_results' %}"><i class="bi bi-bar-chart"></i> Results</a></li>
            <li><a href="{% url 'admin_manage_fees' %}"><i class="bi bi-cash-coin"></i> Fee Management</a></li> 
            <li><a href="{% url 'admin_career_applications' %}"><i class="bi bi-file-earmark-text"></i> Applications</a></li>
            <li><a href="{% url 'admin_notices' %}"><i class="bi bi-megaphone"></i> Manage Notices</a></li>
            <li><a href="{% url 'admin_analytics' %}"><i class="bi bi-graph-up"></i> Analytics</a></li>
        </ul>
        <div class="logout-btn">
            <form method="post" action="{% url 'logout' %}" class="w-100">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger w-100">
                    <i class="bi bi-box-arrow-right"></i> Logout
                </button>
            </form>
        </div>
    </div>

    <!-- RIGHT CONTENT -->
    <div class="main-content">
        <h2 class="dashboard-title">Admin Dashboard Overview</h2>
        
        <!-- STATS CARDS - 3 IN A ROW -->
        <div class="stats-grid">
            <!-- Teachers -->
            <div class="stat-card teacher-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-person-badge"></i>
                    </div>
                    <h3>{{ teachers_count }}</h3>
                    <p>Total Teachers</p>
                    <a href="{% url 'manage_teachers' %}" class="card-btn">Manage</a>
                </div>
            </div>

            <!-- Students -->
            <div class="stat-card student-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <h3>{{ students_count }}</h3>
                    <p>Total Students</p>
                    <a href="{% url 'manage_students' %}" class="card-btn">Manage</a>
                </div>
            </div>

            <!-- Pending Requests -->
            <div class="stat-card pending-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-hourglass-split"></i>
                    </div>
                    <h3>{{ pending_count }}</h3>
                    <p>Pending Requests</p>
                    <a href="{% url 'pending_requests' %}" class="card-btn">Review</a>
                </div>
            </div>
        </div>

        <!-- FUNCTION CARDS - 3 IN A ROW -->
        <div class="stats-grid">
            <!-- Attendance -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <h5>Attendance Management</h5>
                    <p>View and manage student attendance records</p>
                    <a href="{% url 'admin_view_attendance' %}" class="card-btn">View Attendance</a>
                </div>
            </div>

            <!-- Fees -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-cash-coin"></i>
                    </div>
                    <h5>Fee Management</h5>
                    <p>Process and track student fee payments</p>
                    <a href="{% url 'admin_manage_fees' %}" class="card-btn">Manage Fees</a>
                </div>
            </div>

            <!-- Results -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-bar-chart"></i>
                    </div>
                    <h5>Result Management</h5>
                    <p>Upload and manage student results</p>
                    <a href="{% url 'admin_manage_results' %}" class="card-btn">Manage Results</a>
                </div>
            </div>
        </div>

        <!-- FUNCTION CARDS - SECOND ROW -->
        <div class="stats-grid">
            <!-- Applications -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-file-earmark-text"></i>
                    </div>
                    <h5>Career Applications</h5>
                    <p>Review teaching position applications</p>
                    <a href="{% url 'admin_career_applications' %}" class="card-btn">View Applications</a>
                </div>
            </div>

            <!-- Notices -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-megaphone"></i>
                    </div>
                    <h5>Notification Center</h5>
                    <p>Create and manage announcements</p>
                    <a href="{% url 'admin_notices' %}" class="card-btn">Manage Notices</a>
                </div>
            </div>
            
            <!-- Analytics -->
            <div class="stat-card function-card">
                <div class="card-content">
                    <div class="stats-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h5>Analytics Dashboard</h5>
                    <p>View institutional performance metrics</p>
                    <a href="{% url 'admin_analytics' %}" class="card-btn">View Analytics</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Custom CSS to replace Bootstrap */
    .dashboard-container {
        display: flex;
        min-height: 80vh;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Sidebar Styles */
    .sidebar {
        width: 250px;
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }

    .admin-profile {
        margin-bottom: 20px;
    }

    .admin-img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #1abc9c;
    }

    .welcome-text {
        color: #bdc3c7;
        margin-top: 10px;
    }

    .sidebar-menu {
        list-style: none;
        padding: 0;
        margin: 20px 0;
    }

    .sidebar-menu li {
        margin: 15px 0;
    }

    .sidebar-menu li a {
        color: #ecf0f1;
        text-decoration: none;
        display: flex;
        align-items: center;
        padding: 10px;
        border-radius: 5px;
        transition: background 0.3s;
    }

    .sidebar-menu li a:hover {
        background: #34495e;
    }

    .sidebar-menu li a i {
        margin-right: 10px;
        font-size: 1.2rem;
    }

    .logout-btn {
        margin-top: 30px;
    }

    .btn-danger {
        background: #e74c3c;
        color: white;
        padding: 10px;
        border-radius: 5px;
        text-decoration: none;
        display: block;
        text-align: center;
        transition: background 0.3s;
        border: none;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn-danger:hover {
        background: #c0392b;
        color: white;
    }

    /* Main Content Styles */
    .main-content {
        flex: 1;
        padding: 30px;
        background: #f8f9fa;
    }

    .dashboard-title {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 30px;
        font-size: 28px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        overflow: hidden;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .card-content {
        padding: 20px;
        text-align: center;
    }

    .stats-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
    }

    .teacher-card .stats-icon {
        color: #3498db;
    }

    .student-card .stats-icon {
        color: #2ecc71;
    }

    .pending-card .stats-icon {
        color: #f39c12;
    }

    .function-card .stats-icon {
        color: #9b59b6;
    }

    .stat-card h3 {
        font-size: 2.2rem;
        color: #2c3e50;
        margin: 10px 0;
    }

    .stat-card h5 {
        font-size: 1.2rem;
        color: #2c3e50;
        margin: 10px 0;
    }

    .stat-card p {
        color: #7f8c8d;
        margin-bottom: 20px;
    }

    .card-btn {
        display: inline-block;
        padding: 8px 16px;
        background: #3498db;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        transition: background 0.3s;
    }

    .card-btn:hover {
        background: #2980b9;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .dashboard-container {
            flex-direction: column;
        }
        
        .sidebar {
            width: 100%;
            padding: 15px;
        }
        
        .main-content {
            padding: 20px;
        }
        
        .stats-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}